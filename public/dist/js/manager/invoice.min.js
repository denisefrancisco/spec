/*! Spec 0.1.5 */
function generateTableRow(){var a=document.createElement("tr");return a.innerHTML='<td><a class="cut">-</a><span contenteditable></span></td><td><span contenteditable></span></td><td><span data-prefix>$</span><span contenteditable>0.00</span></td><td><span contenteditable>0</span></td><td><span data-prefix>$</span><span>0.00</span></td>',a}function parseFloatHTML(a){return parseFloat(a.innerHTML.replace(/[^\d\.\-]+/g,""))||0}function parsePrice(a){return a.toFixed(2).replace(/(\d)(?=(\d\d\d)+([^\d]|$))/g,"$1,")}function updateNumber(a){var b=document.activeElement,c=parseFloat(b.innerHTML),d=b.innerHTML==parsePrice(parseFloatHTML(b));isNaN(c)||38!=a.keyCode&&40!=a.keyCode&&!a.wheelDeltaY||(a.preventDefault(),c+=38==a.keyCode?1:40==a.keyCode?-1:Math.round(.025*a.wheelDelta),c=Math.max(c,0),b.innerHTML=d?parsePrice(c):c),updateInvoice()}function updateInvoice(){for(var a,b,c,d,e,c=0,d=document.querySelectorAll("table.inventory tbody tr"),e=0;d[e];++e)a=d[e].querySelectorAll("span:last-child"),b=parseFloatHTML(a[2])*parseFloatHTML(a[3]),c+=b,a[4].innerHTML=b;a=document.querySelectorAll("table.balance td:last-child span:last-child"),a[0].innerHTML=c,a[2].innerHTML=document.querySelector("table.meta tr:last-child td:last-child span:last-child").innerHTML=parsePrice(c-parseFloatHTML(a[1]));var f=document.querySelector("#prefix").innerHTML;for(d=document.querySelectorAll("[data-prefix]"),e=0;d[e];++e)d[e].innerHTML=f;for(d=document.querySelectorAll("span[data-prefix] + span"),e=0;d[e];++e)document.activeElement!=d[e]&&(d[e].innerHTML=parsePrice(parseFloatHTML(d[e])))}function onContentLoad(){function a(a){var b,c=a.target.querySelector("[contenteditable]");c&&a.target!=document.documentElement&&a.target!=document.body&&c.focus(),a.target.matchesSelector(".add")?document.querySelector("table.inventory tbody").appendChild(generateTableRow()):"cut"==a.target.className&&(b=a.target.ancestorQuerySelector("tr"),b.parentNode.removeChild(b)),updateInvoice()}function b(a){a.preventDefault(),g.classList.add("hover")}function c(a){a.preventDefault(),g.classList.remove("hover")}function d(a){g.classList.remove("hover");var b=new FileReader,c=a.dataTransfer?a.dataTransfer.files:a.target.files,d=0;for(b.onload=e;c[d];)b.readAsDataURL(c[d++])}function e(a){var b=a.target.result;g.src=b}updateInvoice();var f=document.querySelector("input"),g=document.querySelector("img");window.addEventListener&&(document.addEventListener("click",a),document.addEventListener("mousewheel",updateNumber),document.addEventListener("keydown",updateNumber),document.addEventListener("keydown",updateInvoice),document.addEventListener("keyup",updateInvoice),f.addEventListener("focus",b),f.addEventListener("mouseover",b),f.addEventListener("dragover",b),f.addEventListener("dragenter",b),f.addEventListener("blur",c),f.addEventListener("dragleave",c),f.addEventListener("mouseout",c),f.addEventListener("drop",d),f.addEventListener("change",d))}!function(a){for(var b,c=a.head=a.getElementsByTagName("head")[0]||a.documentElement,d="article aside audio bdi canvas data datalist details figcaption figure footer header hgroup mark meter nav output picture progress section summary time video x".split(" "),e=d.length,f=0;e>f;)b=a.createElement(d[++f]);return b.innerHTML="x<style>article,aside,details,figcaption,figure,footer,header,hgroup,nav,section{display:block}audio[controls],canvas,video{display:inline-block}[hidden],audio{display:none}mark{background:#FF0;color:#000}</style>",c.insertBefore(b.lastChild,c.firstChild)}(document),function(a,b,c,d){function e(){}e.prototype.length=c.length,b.matchesSelector=b.matchesSelector||b.mozMatchesSelector||b.msMatchesSelector||b.oMatchesSelector||b.webkitMatchesSelector||function(a){return c.indexOf.call(this.parentNode.querySelectorAll(a),this)>-1},b.ancestorQuerySelectorAll=b.ancestorQuerySelectorAll||b.mozAncestorQuerySelectorAll||b.msAncestorQuerySelectorAll||b.oAncestorQuerySelectorAll||b.webkitAncestorQuerySelectorAll||function(a){for(var b=this,d=new e;b=b.parentElement;)b.matchesSelector(a)&&c.push.call(d,b);return d},b.ancestorQuerySelector=b.ancestorQuerySelector||b.mozAncestorQuerySelector||b.msAncestorQuerySelector||b.oAncestorQuerySelector||b.webkitAncestorQuerySelector||function(a){return this.ancestorQuerySelectorAll(a)[0]||null}}(this,Element.prototype,Array.prototype),window.addEventListener&&document.addEventListener("DOMContentLoaded",onContentLoad);