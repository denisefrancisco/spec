
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Spec: Today's Events</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- CSS -->
     <script src="../lib/jquery.min.js"></script>
     <script>
    function htmlspecialchars_decode(string, quote_style) {
      // http://kevin.vanzonneveld.net
      // +   original by: Mirek Slugen
      // +   improved by: Kevin van Zonneveld (http://kevin.vanzonneveld.net)
      // +   bugfixed by: Mateusz "loonquawl" Zalega
      // +      input by: ReverseSyntax
      // +      input by: Slawomir Kaniecki
      // +      input by: Scott Cariss
      // +      input by: Francois
      // +   bugfixed by: Onno Marsman
      // +    revised by: Kevin van Zonneveld (http://kevin.vanzonneveld.net)
      // +   bugfixed by: Brett Zamir (http://brett-zamir.me)
      // +      input by: Ratheous
      // +      input by: Mailfaker (http://www.weedem.fr/)
      // +      reimplemented by: Brett Zamir (http://brett-zamir.me)
      // +    bugfixed by: Brett Zamir (http://brett-zamir.me)
      // *     example 1: htmlspecialchars_decode("<p>this -&gt; &quot;</p>", 'ENT_NOQUOTES');
      // *     returns 1: '<p>this -> &quot;</p>'
      // *     example 2: htmlspecialchars_decode("&amp;quot;");
      // *     returns 2: '&quot;'
      var optTemp = 0,
          i = 0,
          noquotes = false;
      if (typeof quote_style === 'undefined') {
        quote_style = 2;
      }
      string = string.toString().replace(/&lt;/g, '<').replace(/&gt;/g, '>');
      var OPTS = {
        'ENT_NOQUOTES': 0,
        'ENT_HTML_QUOTE_SINGLE': 1,
        'ENT_HTML_QUOTE_DOUBLE': 2,
        'ENT_COMPAT': 2,
        'ENT_QUOTES': 3,
        'ENT_IGNORE': 4
      };
      if (quote_style === 0) {
        noquotes = true;
      }
      if (typeof quote_style !== 'number') { // Allow for a single string or an array of string flags
        quote_style = [].concat(quote_style);
        for (i = 0; i < quote_style.length; i++) {
          // Resolve string input to bitwise e.g. 'PATHINFO_EXTENSION' becomes 4
          if (OPTS[quote_style[i]] === 0) {
            noquotes = true;
          } else if (OPTS[quote_style[i]]) {
            optTemp = optTemp | OPTS[quote_style[i]];
          }
        }
        quote_style = optTemp;
      }
      if (quote_style & OPTS.ENT_HTML_QUOTE_SINGLE) {
        string = string.replace(/&#0*39;/g, "'"); // PHP doesn't currently escape if more than one 0, but it should
        // string = string.replace(/&apos;|&#x0*27;/g, "'"); // This would also be useful here, but not a part of PHP
      }
      if (!noquotes) {
        string = string.replace(/&quot;/g, '"');
      }
      // Put this in last place to avoid escape being double-decoded
      string = string.replace(/&amp;/g, '&');

      return string;
    }
    $(document).ready(function() {
      $('body').html(htmlspecialchars_decode($('body').html()));
      $('body').html(htmlspecialchars_decode($('body').html())); 
      //this is important because some HTML characters consist of other HTML characters, so double decoding is needed
    })
   </script>
  <link href="http://getbootstrap.com/2.3.2/assets/css/bootstrap.css" rel="stylesheet" media="screen,print">
    <style type="text/css">

      /* Sticky footer styles
      -------------------------------------------------- */

      html,
      body {
        height: 100%;
        /* The html and body elements cannot have any padding or margin. */
      }

      /* Wrapper for page content to push down footer */
      #wrap {
        min-height: 100%;
        height: auto !important;
        height: 100%;
        /* Negative indent footer by it's height */
        margin: 0 auto -60px;
      }

      /* Set the fixed height of the footer here */
      #push,
      #footer {
        height: 60px;
      }
      #footer {
        background-color: #f5f5f5;
      }

      /* Lastly, apply responsive CSS fixes as necessary */
      @media (max-width: 767px) {
        #footer {
          margin-left: -20px;
          margin-right: -20px;
          padding-left: 20px;
          padding-right: 20px;
        }
      }



      /* Custom page CSS
      -------------------------------------------------- */
      /* Not required for template or sticky footer method. */

      .container {
        width: auto;
        max-width: 680px;
      }
      .container .credit {
        margin: 20px 0;
      }

    </style>

  </head>

  <body>


    <!-- Part 1: Wrap all page content here -->
    <div id="wrap">

      <!-- Begin page content -->
      <div class="container">
        <p class="lead">Events of <%= (new Date()).toDateString() %>:</p>

        <% events.forEach(function(event) { %>
        <div class="media">
          
          
          <div class="media-body"><span class="media-heading pull-right" style="font-size:18px"><%= formatAMPM(event.start) %> - <%= formatAMPM(event.end) %></span>
            <h4 class="media-heading"><%= event.title %></h4>
            
            <%= event.desc %>
            <span class="pull-right"><h4><%= event.staffNeeded %> staff needed</h4></span>
            <h5>Event itself starts at <%= formatAMPM(event.eventStart) %> - <%= formatAMPM(event.eventEnd) %></h5>
         <table class="table table-striped table-bordered">
              <tbody>
               <% event.shifts.forEach(function(shift) { %>
                <tr>
                  <td><%= storeStaff.filter(function(staff) {return staff.username == shift.staff;})[0].name %> (<%= shift.staff %>)</td>
                  <td><%= formatAMPM(shift.start) %></td>
                  <td><%= formatAMPM(shift.end) %></td>
                </tr>
                <% }) %>
              </tbody>
            </table>
          </div>
        </div>
         <% }) %>
      </div>

      <div id="push"></div>
    </div>

    <div id="footer">
      <div class="container">
        <p class="muted credit">Wesleyan University Instructional Media Services - Special Events Calendar (Spec).</p>
      </div>
    </div>
  </body>
</html>